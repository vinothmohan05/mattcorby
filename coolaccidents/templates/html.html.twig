{#
/**
 * @file
 * Theme override for the basic structure of a single Drupal page.
 *
 * Variables:
 * - logged_in: A flag indicating if user is logged in.
 * - root_path: The root path of the current page (e.g., node, admin, user).
 * - node_type: The content type for the current node, if the page is a node.
 * - head_title: List of text elements that make up the head_title variable.
 *   May contain or more of the following:
 *   - title: The title of the page.
 *   - name: The name of the site.
 *   - slogan: The slogan of the site.
 * - page_top: Initial rendered markup. This should be printed before 'page'.
 * - page: The rendered page markup.
 * - page_bottom: Closing rendered markup. This variable should be printed after
 *   'page'.
 * - db_offline: A flag indicating if the database is offline.
 * - placeholder_token: The token for generating head, css, js and js-bottom
 *   placeholders.
 *
 * @see template_preprocess_html()
 */
#}
{%
  set body_classes = [
    logged_in ? 'user-logged-in',
    not root_path ? 'path-frontpage' : 'path-' ~ root_path|clean_class,
    node_type ? 'page-node-type-' ~ node_type|clean_class,
	node_type|clean_class == "page" ? 'landing-page',
	node_type|clean_class != "page" ? 'detail-page',
	path_info.args ? 'page-node-' ~ path_info.args,
	path_info.args ? 'page-node-id-' ~ path_info.args,
    db_offline ? 'db-offline',
  ]
%}  
<!DOCTYPE html>
<html{{ html_attributes }}>
  <head>
    <base href="/">
    <head-placeholder token="{{ placeholder_token|raw }}">
    <title>{{ head_title|safe_join(' | ') }}</title>
    <css-placeholder token="{{ placeholder_token|raw }}">
    <js-placeholder token="{{ placeholder_token|raw }}">	
	
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"> 
	<title>Widgets Magazine</title> 
	<style type="text/css" media="screen"> 
	</style>

    <script>digitalData={}</script>

	<script src="https://use.typekit.net/evo1rml.js"></script>
	<script>try{Typekit.load({ async: true });}catch(e){}</script>
	
	<!-- Shopify JS -->
	<script src="https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js"></script>
	
	<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
	<script>
	  var googletag = googletag || {};
	  googletag.cmd = googletag.cmd || [];
	</script>

	<!-- Home ADs -->
	<!--<script>
    // Extract article title from url
    pageURL = window.location.pathname;
    pageURLArray = pageURL.split('/');
    articleURL = '';
    while (pageURLArray.length > 0 && articleURL == '') {
        articleURL = pageURLArray.pop();
    }
        console.log(articleURL);
    googletag.cmd.push(function() {
        if ( window.location.pathname == '/' ){
            // Define ad slots and slot-level targeting 
            var slot1 = googletag.defineSlot('/21664395848/coolaccidents_ROS/home', 'fluid', 'dfp-ad-slot-1')
                .addService(googletag.pubads()).setTargeting("pos", "1")
            var slot2 = googletag.defineSlot('/21664395848/coolaccidents_ROS/home', [300, 250], 'dfp-ad-slot-2')
                .addService(googletag.pubads()).setTargeting("pos", "2")
            // Set page-level key-values
            googletag.pubads().setTargeting("pageURL", [articleURL]).setTargeting("pagetype", ["home"]);
        }
        else if(window.location.pathname.indexOf('news/') != -1){
            // Define responsive ad size mapping 
			var mapslot1 = googletag.sizeMapping()
				.addSize([0, 0], [300, 250])
				.addSize([997, 0], [[300, 250],[300, 600],[300, 1050]]).build();	
            // Define ad slots and slot-level targeting 
            var slot1 = googletag.defineSlot('/21664395848/coolaccidents_ROS/latestnews', [[300, 250],[300,600],[300, 1050]], 'dfp-ad-slot-1').defineSizeMapping(mapslot1)
                .addService(googletag.pubads()).setTargeting("pos", "1")
			// Set page-level key-values
            googletag.pubads().setTargeting("pageURL", [articleURL]).setTargeting("pagetype", ["article"]);

        }
        else if(window.location.pathname.indexOf('tags/') != -1){
            var tagpages = ["new music", "reviews", "interviews", "tours", "win"];
           if(tagpages.includes(articleURL)){
               if(articleURL == "new music"){
                    articleURL = "newmusic";
               }
               console.log(articleURL);
               // Define ad slots and slot-level targeting 
            var slot1 = googletag.defineSlot('/21664395848/coolaccidents_ROS/' + articleURL, [[300, 250],['fluid']], 'dfp-ad-slot-1')
                .addService(googletag.pubads()).setTargeting("pos", "1")
			// Set page-level key-values
            googletag.pubads().setTargeting("pageURL", [articleURL]).setTargeting("pagetype", ["index"]);

           }
            
        }
		else if(window.location.pathname.indexOf('/news') != -1){
            var tagpages = ["blog"];
           if(tagpages.includes(articleURL)){
               // Define ad slots and slot-level targeting 
            var slot1 = googletag.defineSlot('/21664395848/coolaccidents_ROS/latestnews', [[300, 250],['fluid']], 'dfp-ad-slot-1')
                .addService(googletag.pubads()).setTargeting("pos", "1")
			// Set page-level key-values
            googletag.pubads().setTargeting("pageURL", [articleURL]).setTargeting("pagetype", ["index"]);

           }
            
        }
			
			
            googletag.pubads().enableAsyncRendering();
            googletag.pubads().collapseEmptyDivs(true);
            googletag.pubads().setCentering(true);
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });

  </script>-->


	<!-- Hammer JS -->
	<script type="text/javascript" src="/{{ base_path ~ directory }}/lib/hammer.js?"></script>
	<!--link rel="stylesheet" href="maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"-->
	<link rel="stylesheet" href="//cdn.jsdelivr.net/gridlex/2.0.9/gridlex.min.css">
	<link type="text/css" rel="stylesheet" href="//fast.fonts.net/cssapi/18283877-cebd-41e3-9ad6-7ba7a09c8bb8.css?1"/>
	<link href="/{{ base_path ~ directory }}/assets/normalize.css" rel="stylesheet" />
	<link href="/{{ base_path ~ directory }}/css/global-style.css" rel="stylesheet" />
	<link href="/{{ base_path ~ directory }}/styles.7030d5a629adf31549a5.bundle.css" rel="stylesheet" />
  </head>
  <body{{ attributes.addClass(body_classes) }}>
	  <script>
		// START twttr initialization
		window.twttr = (function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0],
		  t = window.twttr || {};
		  if (d.getElementById(id)) return t;
		  js = d.createElement(s);
		  js.id = id;
		  js.src = "https://platform.twitter.com/widgets.js";
		  fjs.parentNode.insertBefore(js, fjs);
		
		  t._e = [];
		  t.ready = function(f) {
			t._e.push(f);
		  };
		
		  return t;
		}(document, "script", "twitter-wjs"));
		// END twttr initialization
	  </script>
	<!--
	  <ol>
	  {% for key, value in _context  %}
		<li>{{ key }}</li>
	  {% endfor %}
	</ol>
	-->
    {{ page_top }}
    {{ page }}
    {{ page_bottom }}	
	
    <js-bottom-placeholder token="{{ placeholder_token|raw }}">
  </body>
    <script type="text/javascript" src="/{{ base_path ~ directory }}/inline.135c2b7ce55d6508f84c.bundle.js"></script>
    <script type="text/javascript" src="/{{ base_path ~ directory }}/polyfills.d86e76d1d0cef0af7620.bundle.js"></script>
	<script type="text/javascript" src="/{{ base_path ~ directory }}/vendor.e75dee2076cc4c0c2ce8.bundle.js"></script>
	<script type="text/javascript" src="/{{ base_path ~ directory }}/main.eaa7c91ca6c3173ddc74.bundle.js"></script>
</html>
